# Data Transformation

We'd like to order the data by `average_review` to see the general ranking of the restaurants.

```{r}
data <- read.csv("restaurant.csv", encoding = "UTF-8")
data <- data[order(data$average_review, decreasing = TRUE),]
data
```
```{r}

data$name <- tolower(data$name)
data$name<-sub("\\-.*", "", data$name)

violations <- read.csv(file = 'restaurant_grades.csv', encoding = "UTF-8")

violations$DBA <- tolower(violations$DBA)
violations$DBA <- sub("\\(.*",'',violations$DBA)

library(sqldf)

violation_counts <- sqldf('select DBA,count(DBA) from violations group by DBA')

sqldf('select * from data as d join violation_counts as v on d.name = v.DBA')
```


```{r}
violations$DBA <- sub("\\(.*",'',violations$DBA)
```



